{let e=function(){let e=$("#new-comment-form");e.submit((function(l){l.preventDefault(),$.ajax({url:"/comments/create",type:"post",data:e.serialize(),success:function(e){console.log(e);let l=n(e.data.comment);$("#post-comments-"+e.data.comment.post).prepend(l),console.log($(" .delete-comment-btn",l)),o($(" .delete-comment-btn",l)),t($(" .toggle-like-button",l))},error:function(e){console.log(e.responseText)}})}))},t=function(e){$(e).click((function(t){t.preventDefault(),console.log("url for like-toggle: ",$(e).attr("href")),$.ajax({type:"POST",url:$(e).attr("href")}).done((function(t){let n=parseInt($(e).attr("data-likes"));console.log(n),1==t.data.deleted?n-=1:n+=1,$(e).attr("data-likes",n),$(e).html(`${n} Likes`)})).fail((function(e){console.log("error in completing the request")}))}))},n=function(e){return $(`\n            <li id="comment-${e._id}">         \n            <small>\n                <a href="/comments/destroy/${e._id}" class="delete-comment-btn">Delete</a>\n            </small>\n                ${e.content}\n            <br>\n            <small>\n            ${e.user.name}\n            </small>\n\n            <br>\n            <br>\n            <small>\n             <a class = "toggle-like-button" data-likes="0" href="/likes/toggle/?id=${e._id}&type=Comment">\n             0 likes\n             </a>\n             </small>\n             <br>\n             <br>\n\n\n            </li>\n        `)},o=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){console.log("Data is:",e),$(`#comment-${e.data.comment_id}`).remove()},error:function(e){console.log(e.responseText)}})}))},l=function(){$.ajax({url:"/comments/getAll",type:"get",success:function(e){console.log(e);let l=e.data.comments;for(comment of l){let e=n(comment);$("#post-comments-"+comment.post).prepend(e),t($(" .toggle-like-button",e)),console.log($(" .delete-comment-btn",e)),o($(" .delete-comment-btn",e))}},error:function(e){console.log(e.responseText)}})};e(),l()}