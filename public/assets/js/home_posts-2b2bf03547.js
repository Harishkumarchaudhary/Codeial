{let t=function(){let t=$("#new-post-form");t.submit((function(e){e.preventDefault(),$.ajax({url:"/posts/create",type:"post",data:t.serialize(),success:function(t){console.log(t);let e=o(t.data.post);$("#posts-list-container>ul").prepend(e),l($(" .delete-post-button",e)),n($(" .toggle-like-button",e))},error:function(t){console.log(t.responseText)}})}))},e=function(){$.ajax({url:"/posts/all",type:"get",success:function(t){console.log(t);let e=t.data.posts;for(post of e){let e=o(t.data.post);$("#posts-list-container>ul").prepend(e),l($(" .delete-post-button",e)),n($(" .toggle-like-button",e))}},error:function(t){console.log(t.responseText)}})},n=function(t){$(t).click((function(e){e.preventDefault(),console.log("url for like-toggle: ",$(t).attr("href")),$.ajax({type:"POST",url:$(t).attr("href")}).done((function(e){let n=parseInt($(t).attr("data-likes"));console.log(n),1==e.data.deleted?n-=1:n+=1,$(t).attr("data-likes",n),$(t).html(`${n} Likes`)})).fail((function(t){console.log("error in completing the request")}))}))},o=function(t){return $(`<li id="post-${t._id}">\n         \n                 <small>\n                 <a class="delete-post-button" href="/posts/destroy/${t._id}">Delete</a>\n                 </small>\n        \n                 ${t.content}\n         <br>\n         <small>\n         ${t.user.name}\n         </small>\n\n         <br>\n         <br>\n         <small>\n             <a class = "toggle-like-button" data-likes="0" href= "/likes/toggle/?id=${t._id}&type=Post">\n             0 likes\n             </a>\n         </small>\n         <br>\n         <br>\n         \n\n         <div class="post-comments">\n             \n                 <form action="/comments/create" method="POST" id="new-comment-form">\n                     <input type="text" name="content" placeholder="Type here to add comment..." required>\n                     <input type="hidden" name="post" value="${t._id}">\n                     <input type="submit" value="Add Comment">\n                 </form>\n             \n         </div>\n     \n         <div class="post-comments-list">\n             <ul id="post-comments-${t._id}">\n                \n             </ul>\n         </div>\n     \n     </li>`)},l=function(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){console.log("Data is:",t),$(`#post-${t.data.post_id}`).remove()},error:function(t){console.log(t.responseText)}})}))};t(),e()}